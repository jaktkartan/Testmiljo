<!DOCTYPE html>
<html>
<head>
    <title>Leaflet Map with SWEREF 99 TM</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" integrity="sha256-p4NxAoJBhIIN+hmNHrzRCf9tD/miZyoHS5obTRR9BMY=" crossorigin="" />
    <style>
        #map { height: 100vh; }
    </style>
</head>
<body>
    <div id="map"></div>
    
    <!-- Lägg till proj4js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4js/2.11.0/proj4.js"></script>
    <!-- Lägg till proj4leaflet -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/proj4leaflet/1.0.1/proj4leaflet.js"></script>
    <!-- Lägg till Leaflet -->
    <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" integrity="sha256-20nQCchB9co0qIjJZRGuk2/Z9VM+kNiyxNV1lvTlZBo=" crossorigin=""></script>

    <script>
        // Kontrollera om proj4 är definierad
        if (typeof proj4 === 'undefined') {
            console.error('proj4 is not loaded.');
        } else {
            console.log('proj4 is loaded.');
        }

        // Kontrollera om proj4leaflet är definierad
        if (typeof L.Proj === 'undefined') {
            console.error('proj4leaflet is not loaded.');
        } else {
            console.log('proj4leaflet is loaded.');
        }

        // Definiera CRS för SWEREF 99 TM
        proj4.defs("EPSG:3006", "+proj=tmerc +lat_0=0 +lon_0=13 +k=1 +x_0=500000 +y_0=-667000 +datum=WGS84 +units=m +no_defs");

        var sweref99TM = L.Proj.CRS('EPSG:3006', proj4('EPSG:3006'));

        var map = L.map('map', {
            crs: sweref99TM,
            center: [60.5, 15.5], // Justera till det område du vill centrera
            zoom: 6
        });

        L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
            attribution: '&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'
        }).addTo(map);
    </script>
</body>
</html>
